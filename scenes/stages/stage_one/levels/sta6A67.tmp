[gd_scene load_steps=28 format=3 uid="uid://b4id8yc3aiopo"]

[ext_resource type="Script" path="res://scenes/stages/stage_one/stage_1_level.gd" id="1_gkhvj"]
[ext_resource type="PackedScene" uid="uid://bf164ue1aecqn" path="res://scenes/objects/possessable_objects/visible_path/visible_path.tscn" id="2_rmmut"]
[ext_resource type="PackedScene" uid="uid://dl8dhskt3uetn" path="res://scenes/objects/possessable_objects/clock/time_control_clock.tscn" id="3_524s5"]
[ext_resource type="Script" path="res://resources/emotion_state.gd" id="4_q3bwu"]
[ext_resource type="PackedScene" uid="uid://c7b1ix1wtarcb" path="res://scenes/player/player.tscn" id="6_tqsuy"]
[ext_resource type="PackedScene" uid="uid://dhavwi0uq6seh" path="res://scenes/emotion/emotion.tscn" id="7_o88tx"]
[ext_resource type="PackedScene" uid="uid://43wo8ndeom6m" path="res://scenes/objects/possessable_objects/block/moveable_block.tscn" id="8_8fuf2"]
[ext_resource type="PackedScene" uid="uid://u6g2ic10xw31" path="res://scenes/heart/heart.tscn" id="8_agqin"]
[ext_resource type="Script" path="res://scenes/stages/stage_one/levels/CirclePathBlock.gd" id="10_idgcg"]
[ext_resource type="Script" path="res://resources/jump_state.gd" id="10_jxylr"]
[ext_resource type="Resource" uid="uid://dx2wunvnjbpx8" path="res://resources/emotion_states/anger.tres" id="11_gbyqi"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fiukr"]
albedo_color = Color(0.792157, 0.792157, 0.792157, 1)

[sub_resource type="Resource" id="Resource_a3g3f"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anxiety"
color = Color(0.839216, 0.74902, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.901961, 0.32549, 1), Color(0.929412, 0.658824, 0, 1), Color(1, 0.937255, 0.101961, 1)])

[sub_resource type="Sky" id="Sky_iafvu"]

[sub_resource type="Environment" id="Environment_pd4vg"]
background_mode = 2
sky = SubResource("Sky_iafvu")
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.97
ssao_radius = 8.1
ssao_intensity = 4.3
glow_enabled = true
glow_intensity = 1.86
glow_strength = 0.87
glow_bloom = 0.02
glow_hdr_threshold = 0.44

[sub_resource type="Resource" id="Resource_f05ny"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anger"
color = Color(1.002, 0, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.247059, 0.188235, 1), Color(0.552941, 0.0235294, 0, 1), Color(1, 0.388235, 0.321569, 1)])

[sub_resource type="Resource" id="Resource_00ff4"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anxiety"
color = Color(0.839216, 0.74902, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.901961, 0.32549, 1), Color(0.929412, 0.658824, 0, 1), Color(1, 0.937255, 0.101961, 1)])

[sub_resource type="Curve3D" id="Curve3D_j1ua6"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -10.566, 0, 100),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pya7y"]
transparency = 1
albedo_color = Color(0, 0, 0, 0)

[sub_resource type="GDScript" id="GDScript_q16xr"]
script/source = "extends CSGPolygon3D

@onready var anim_player: AnimationPlayer =  $AnimationPlayer

func play_glow() -> void:
	anim_player.play(\"interact_glow\", -1, 1, false)

func end_glow() -> void: 
	anim_player.play(\"RESET\", -1, 1, false)
"

[sub_resource type="Resource" id="Resource_mw5ee"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anger"
color = Color(1.002, 0, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.247059, 0.188235, 1), Color(0.552941, 0.0235294, 0, 1), Color(1, 0.388235, 0.321569, 1)])

[sub_resource type="Resource" id="Resource_keoq2"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anger"
color = Color(1.002, 0, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.247059, 0.188235, 1), Color(0.552941, 0.0235294, 0, 1), Color(1, 0.388235, 0.321569, 1)])

[sub_resource type="Resource" id="Resource_iiu4b"]
resource_local_to_scene = true
script = ExtResource("10_jxylr")
animation_name = "JumpingUp(1)0"
jump_height = 8.0
apex_duration = 0.2

[sub_resource type="Curve3D" id="Curve3D_uabw8"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -80.2544, 0, -0.150621, -76.822, 0, 1.605, 76.822, 0, -1.605, -0.410271, 0, -80.3246, 0, 0, 0, 0, 0, 0, 79.4338, 0, -0.150628, 79.0968, 0, 0.606171, -79.0968, 0, -0.606171, -0.410264, 0, 80.6833, 0, 0, 0, 0, 0, 0, -80.2544, 0, -0.150621),
"tilts": PackedFloat32Array(150, 0, 0, 0, 0)
}
point_count = 5

[sub_resource type="BoxMesh" id="BoxMesh_bybfp"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_32k8d"]
points = PackedVector3Array(0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_p7wg1"]
resource_local_to_scene = true
transparency = 1
albedo_color = Color(0, 0, 0, 0)

[node name="StageOneLevelSeven" type="Node3D" node_paths=PackedStringArray("player") groups=["levels"]]
transform = Transform3D(1, 0, -1.74846e-07, 0, 1, 0, 1.74846e-07, 0, 1, -65, 0, -311.663)
script = ExtResource("1_gkhvj")
player = NodePath("Player")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -8, 0)
use_collision = true
collision_layer = 3

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D"]
transform = Transform3D(8.63953, 0.000119657, 0.00248373, -0.000140128, 7.37744, -0.0050617, -0.000326336, 0.000567901, 65.7551, 258.515, 3.26362, 534.703)
use_collision = true
size = Vector3(89.2318, 1, 8.76352)
material = SubResource("StandardMaterial3D_fiukr")

[node name="PlayerStartContainer" type="Node3D" parent="."]
transform = Transform3D(-2.18557e-08, 0, -0.5, 0, 0.5, 0, 0.5, 0, -2.18557e-08, 88.3677, 0, 241.133)

[node name="TimeControlClock" parent="." node_paths=PackedStringArray("directional_light") instance=ExtResource("3_524s5")]
transform = Transform3D(120, 0, 0, 0, 120, 0, 0, 0, 120, 320.597, 37.5709, 552.501)
directional_light = NodePath("../light_container")
required_emotion = SubResource("Resource_a3g3f")

[node name="Sketchfab_Scene" parent="TimeControlClock" index="2"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="CamRoot" parent="TimeControlClock" index="4"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Camera3D" parent="TimeControlClock/CamRoot/CamYaw/CamPitch/SpringArm3D" index="0"]
current = false

[node name="Sprite3D" parent="TimeControlClock" index="5"]
transform = Transform3D(0.12, 0, 0, 0, 0.12, 0, 0, 0, 0.12, 0, 0.275908, 1.16385e-08)

[node name="WorldEnvironment_MoonBurst" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pd4vg")

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(-1, 0, -2.38502e-08, 0, 1, 0, 2.38502e-08, 0, -1, 112.238, 4.41536, 269.11)
visible = false
light_energy = 9.566
spot_range = 20.858

[node name="Anger" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_o88tx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 311.169, 1.87169, 474.716)
emotion_state = SubResource("Resource_f05ny")
player = NodePath("../Player")

[node name="Anxiety" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_o88tx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 324.749, 0, 485.515)
emotion_state = SubResource("Resource_00ff4")
player = NodePath("../Player")

[node name="CSGBox3D5" type="CSGBox3D" parent="."]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 308.685, 1.87784, 451.677)
use_collision = true

[node name="BlockContainer" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 315.149, 0, 399.621)

[node name="CSGBox3D" type="CSGBox3D" parent="BlockContainer"]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, -0.47963, 15.7553, 62.5863)
use_collision = true

[node name="CSGBox3D2" type="CSGBox3D" parent="BlockContainer"]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, -6.60463, 9.84366, 44.9053)
use_collision = true

[node name="CSGBox3D3" type="CSGBox3D" parent="BlockContainer"]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, -0.420593, 6.89304, 30.6223)
use_collision = true

[node name="CSGBox3D4" type="CSGBox3D" parent="BlockContainer"]
transform = Transform3D(5, 0, 0, 0, 5, 0, 0, 0, 5, 2.50938, 25.2645, 45.8223)
use_collision = true

[node name="light_container" type="Node3D" parent="."]

[node name="DirectionalLight3D_temp" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(1, 9.21359e-08, -1.486e-07, 0, 0.849893, 0.526956, 1.74846e-07, -0.526956, 0.849893, 0, 26.5368, 0)
visible = false
light_color = Color(0.52549, 0.619608, 0.733333, 1)
light_energy = 0.32
shadow_enabled = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(1, 0, 0, 0, 0.849892, 0.526956, 0, -0.526956, 0.849893, 0, 26.5, 0)
light_color = Color(0.462745, 0.462745, 0.462745, 1)
light_energy = 5.0
shadow_enabled = true
shadow_blur = 0.5
directional_shadow_mode = 0
sky_mode = 1

[node name="Heart" parent="." instance=ExtResource("8_agqin")]
transform = Transform3D(0.353553, 0, -0.353553, 0, 0.5, 0, 0.353553, 0, 0.353553, 515.371, 10.8844, 539.335)

[node name="MovableBlockContainer" type="Node3D" parent="."]
transform = Transform3D(-0.751863, 0, 0.65932, 0, 1, 0, -0.65932, 0, -0.751863, 390.527, 6.25891, 624.855)

[node name="Path3D" type="Path3D" parent="MovableBlockContainer"]
curve = SubResource("Curve3D_j1ua6")

[node name="PathFollow3D" type="PathFollow3D" parent="MovableBlockContainer/Path3D"]
transform = Transform3D(-0.994464, 0, 0.105075, 0, 1, 0, -0.105075, 0, -0.994464, 0, 0, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="MovableBlockContainer/Path3D/PathFollow3D"]
remote_path = NodePath("../../../moveable_block")

[node name="VisiblePath" parent="MovableBlockContainer" instance=ExtResource("2_rmmut")]
path_node = NodePath("../Path3D")
material = SubResource("StandardMaterial3D_pya7y")
script = SubResource("GDScript_q16xr")

[node name="moveable_block" parent="MovableBlockContainer" node_paths=PackedStringArray("player", "path", "visible_path") instance=ExtResource("8_8fuf2")]
transform = Transform3D(-0.994464, 0, 0.105075, 0, 1, 0, -0.105075, 0, -0.994464, 0, 0, 0)
player = NodePath("../../Player")
path = NodePath("../Path3D/PathFollow3D")
visible_path = NodePath("../VisiblePath")
required_emotion = SubResource("Resource_mw5ee")

[node name="MovableBlockContainer2" type="Node3D" parent="."]
transform = Transform3D(0.935222, 0, 0.354062, 0, 1, 0, -0.354062, 0, 0.935222, 442.735, 16.1663, 458.898)

[node name="Path3D" type="Path3D" parent="MovableBlockContainer2"]
curve = SubResource("Curve3D_j1ua6")

[node name="PathFollow3D" type="PathFollow3D" parent="MovableBlockContainer2/Path3D"]
transform = Transform3D(-0.994464, 0, 0.105075, 0, 1, 0, -0.105075, 0, -0.994464, 0, 0, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="MovableBlockContainer2/Path3D/PathFollow3D"]
remote_path = NodePath("../../../moveable_block")

[node name="VisiblePath" parent="MovableBlockContainer2" instance=ExtResource("2_rmmut")]
path_node = NodePath("../Path3D")
material = SubResource("StandardMaterial3D_pya7y")
script = SubResource("GDScript_q16xr")

[node name="moveable_block" parent="MovableBlockContainer2" node_paths=PackedStringArray("player", "path", "visible_path") instance=ExtResource("8_8fuf2")]
transform = Transform3D(-0.994464, 0, 0.105075, 0, 1, 0, -0.105075, 0, -0.994464, 0, 0, 0)
player = NodePath("../../Player")
path = NodePath("../Path3D/PathFollow3D")
visible_path = NodePath("../VisiblePath")
required_emotion = SubResource("Resource_keoq2")

[node name="Player" parent="." instance=ExtResource("6_tqsuy")]
transform = Transform3D(1, 0, -1.74846e-07, 0, 1, 0, 1.74846e-07, 0, 1, 315.385, 1, 468.795)
default_jump = SubResource("Resource_iiu4b")

[node name="CirclePath3D" type="Path3D" parent="."]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 323.694, 57.5758, 549.032)
curve = SubResource("Curve3D_uabw8")

[node name="PathFollow3D" type="PathFollow3D" parent="CirclePath3D"]
transform = Transform3D(-0.708561, 0, 0.705647, 0, 1, 0, -0.705647, 0, -0.708561, -80.2544, 0, -0.150621)
use_model_front = true
tilt_enabled = false

[node name="StaticBody3D" type="StaticBody3D" parent="CirclePath3D/PathFollow3D" node_paths=PackedStringArray("player", "path", "visible_path")]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0, 0, 0)
script = ExtResource("10_idgcg")
player = NodePath("../../../Player")
path = NodePath("..")
visible_path = NodePath("../../VisiblePath")
required_emotion = ExtResource("11_gbyqi")

[node name="MeshInstance3D" type="MeshInstance3D" parent="CirclePath3D/PathFollow3D/StaticBody3D"]
transform = Transform3D(15, 0, 7.15256e-07, 0, 15, 0, -7.15256e-07, 0, 15, 0, 0, 0)
mesh = SubResource("BoxMesh_bybfp")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CirclePath3D/PathFollow3D/StaticBody3D"]
transform = Transform3D(20, 0, 9.53674e-07, 0, 20, 0, -9.53674e-07, 0, 20, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_32k8d")

[node name="VisiblePath" parent="CirclePath3D" instance=ExtResource("2_rmmut")]
material = SubResource("StandardMaterial3D_p7wg1")

[editable path="TimeControlClock"]
