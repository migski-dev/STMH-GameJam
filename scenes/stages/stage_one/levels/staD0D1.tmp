[gd_scene load_steps=18 format=3 uid="uid://clmf5s5vyvx5r"]

[ext_resource type="Script" path="res://scenes/stages/stage_one/stage_1_level.gd" id="1_aoun8"]
[ext_resource type="PackedScene" uid="uid://c7b1ix1wtarcb" path="res://scenes/player/player.tscn" id="2_lwndi"]
[ext_resource type="PackedScene" uid="uid://dib0i03apb2pj" path="res://scenes/objects/door/door.tscn" id="3_0fw8u"]
[ext_resource type="PackedScene" uid="uid://dl8dhskt3uetn" path="res://scenes/objects/clock/time_control_clock.tscn" id="4_t5s85"]
[ext_resource type="PackedScene" uid="uid://43wo8ndeom6m" path="res://scenes/objects/block/moveable_block.tscn" id="5_xogr8"]
[ext_resource type="Texture2D" uid="uid://bj0xqwymqfgqx" path="res://addons/AllSkyFree/Skyboxes/AllSkyFree_Sky_MoonBurst_Equirect.png" id="6_820ku"]
[ext_resource type="PackedScene" uid="uid://dhavwi0uq6seh" path="res://scenes/objects/emotion/emotion.tscn" id="7_3t0e0"]
[ext_resource type="PackedScene" uid="uid://bf164ue1aecqn" path="res://scenes/objects/visible_path/visible_path.tscn" id="8_ikxs8"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_51nhw"]
panorama = ExtResource("6_820ku")

[sub_resource type="Sky" id="Sky_046el"]
sky_material = SubResource("PanoramaSkyMaterial_51nhw")

[sub_resource type="Environment" id="Environment_pd4vg"]
background_mode = 2
sky = SubResource("Sky_046el")
ssao_radius = 8.1
ssao_intensity = 4.3
glow_enabled = true
glow_intensity = 1.86
glow_strength = 0.87
glow_bloom = 0.02
glow_hdr_threshold = 0.44

[sub_resource type="Curve3D" id="Curve3D_ix4mn"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -10.566, 0.0767689, 68.4807),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wqkuw"]
transparency = 1
albedo_color = Color(0, 0, 0, 0)

[sub_resource type="GDScript" id="GDScript_c2eto"]
script/source = "extends CSGPolygon3D

@onready var anim_player: AnimationPlayer =  $AnimationPlayer

func play_glow() -> void:
	anim_player.play(\"interact_glow\", -1, 1, false)

func end_glow() -> void: 
	anim_player.play(\"RESET\", -1, 1, false)
"

[sub_resource type="Curve3D" id="Curve3D_twly5"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -10.566, 0.0767689, 68.4807),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_rxuc2"]
transparency = 1
albedo_color = Color(0, 0, 0, 0)

[sub_resource type="GDScript" id="GDScript_gm6v4"]
script/source = "extends CSGPolygon3D

@onready var anim_player: AnimationPlayer =  $AnimationPlayer

func play_glow() -> void:
	anim_player.play(\"interact_glow\", -1, 1, false)

func end_glow() -> void: 
	anim_player.play(\"RESET\", -1, 1, false)
"

[node name="StageOneLevelFive" type="Node3D" node_paths=PackedStringArray("player") groups=["levels"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -65, 0, -311.663)
script = ExtResource("1_aoun8")
player = NodePath("Player")

[node name="Player" parent="." instance=ExtResource("2_lwndi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 86.5854, 1, 341.72)

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -8, 0)
use_collision = true
collision_layer = 3

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D"]
transform = Transform3D(8.63953, 0.000119657, 0.00248373, -0.000140128, 7.37744, -0.0050617, -0.000326336, 0.000567901, 65.7551, 97.2203, 3.26242, 391.643)
use_collision = true
size = Vector3(22.1619, 1, 5.38646)

[node name="CSGBox3D2" type="CSGBox3D" parent="."]
transform = Transform3D(55.6819, 0, 0, 0, 8.72314, 0, 0, 0, 1, 52.1739, 10.4355, 456.018)
use_collision = true
size = Vector3(1.82745, 3.53528, 1)

[node name="PlayerStartContainer" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 88.3677, 0, 342.515)

[node name="CSGBox3D" type="CSGBox3D" parent="PlayerStartContainer"]
transform = Transform3D(20.0184, 0, 0, 0, 20.0184, 0, 0, 0, 20.0184, -1.37749, 56.5927, 90.8635)
use_collision = true

[node name="door" parent="." instance=ExtResource("3_0fw8u")]
transform = Transform3D(2.99515, 0, 0.170496, 0, 3, 0, -0.170496, 0, 2.99515, 146.507, -1.11412, 490.908)

[node name="TimeControlClock" parent="." node_paths=PackedStringArray("emotion_key", "directional_light") instance=ExtResource("4_t5s85")]
transform = Transform3D(60, 0, 0, 0, 60, 0, 0, 0, 60, 154.275, 22.2644, 433.327)
emotion_key = NodePath("../Emotion")
directional_light = NodePath("../light_container")

[node name="light_container" type="Node3D" parent="."]

[node name="DirectionalLight3D3" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(-0.762621, -0.646738, -0.0117878, 0.420089, -0.509054, 0.751259, -0.491868, 0.567974, 0.659903, 95.0219, 8.7702, 434.676)
rotation_edit_mode = 2
visible = false
shadow_enabled = true
shadow_opacity = 0.8
shadow_blur = 0.0
directional_shadow_mode = 0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(1, 9.21359e-08, -1.486e-07, 0, 0.849893, 0.526956, 1.74846e-07, -0.526956, 0.849893, 0, 26.5368, 0)
light_color = Color(0.52549, 0.619608, 0.733333, 1)
light_energy = 0.32
shadow_enabled = true

[node name="WorldEnvironment_MoonBurst" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pd4vg")

[node name="Emotion" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_3t0e0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 87.5625, -0.671914, 422.156)
player = NodePath("../Player")

[node name="MovableBlockContainer" type="Node3D" parent="."]
transform = Transform3D(-0.258819, 0, 0.965926, 0, 1, 0, -0.965926, 0, -0.258819, 91.566, 6.92323, 392.182)

[node name="Path3D" type="Path3D" parent="MovableBlockContainer"]
curve = SubResource("Curve3D_ix4mn")

[node name="PathFollow3D" type="PathFollow3D" parent="MovableBlockContainer/Path3D"]
transform = Transform3D(-0.988305, 0.000168943, 0.152487, -7.27596e-12, 0.999999, -0.00110792, -0.152487, -0.00109496, -0.988305, 0, 0, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="MovableBlockContainer/Path3D/PathFollow3D"]
remote_path = NodePath("../../../moveable_block")

[node name="VisiblePath" parent="MovableBlockContainer" instance=ExtResource("8_ikxs8")]
path_node = NodePath("../Path3D")
material = SubResource("StandardMaterial3D_wqkuw")
script = SubResource("GDScript_c2eto")

[node name="moveable_block" parent="MovableBlockContainer" node_paths=PackedStringArray("player", "path", "visible_path") instance=ExtResource("5_xogr8")]
transform = Transform3D(-0.988305, 0.000168943, 0.152487, -7.27596e-12, 0.999999, -0.00110792, -0.152487, -0.00109496, -0.988305, 0, 0, 0)
player = NodePath("../../Player")
path = NodePath("../Path3D/PathFollow3D")
visible_path = NodePath("../VisiblePath")

[node name="MovableBlockContainer2" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 80.8438, 6.92323, 392.182)

[node name="Path3D" type="Path3D" parent="MovableBlockContainer2"]
curve = SubResource("Curve3D_twly5")

[node name="PathFollow3D" type="PathFollow3D" parent="MovableBlockContainer2/Path3D"]
transform = Transform3D(-0.988305, 0.000168943, 0.152487, -7.27596e-12, 0.999999, -0.00110792, -0.152487, -0.00109496, -0.988305, 0, 0, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="MovableBlockContainer2/Path3D/PathFollow3D"]
remote_path = NodePath("../../../moveable_block")

[node name="VisiblePath" parent="MovableBlockContainer2" instance=ExtResource("8_ikxs8")]
path_node = NodePath("../Path3D")
material = SubResource("StandardMaterial3D_rxuc2")
script = SubResource("GDScript_gm6v4")

[node name="moveable_block" parent="MovableBlockContainer2" node_paths=PackedStringArray("player", "path", "visible_path") instance=ExtResource("5_xogr8")]
transform = Transform3D(-0.988305, 0.000168943, 0.152487, -7.27596e-12, 0.999999, -0.00110792, -0.152487, -0.00109496, -0.988305, 0, 0, 0)
player = NodePath("../../Player")
path = NodePath("../Path3D/PathFollow3D")
visible_path = NodePath("../VisiblePath")
