[gd_scene load_steps=17 format=3 uid="uid://b4id8yc3aiopo"]

[ext_resource type="Script" path="res://scenes/stages/stage_one/stage_1_level.gd" id="1_gkhvj"]
[ext_resource type="PackedScene" uid="uid://bf164ue1aecqn" path="res://scenes/objects/possessable_objects/visible_path/visible_path.tscn" id="2_rmmut"]
[ext_resource type="PackedScene" uid="uid://dl8dhskt3uetn" path="res://scenes/objects/possessable_objects/clock/time_control_clock.tscn" id="3_524s5"]
[ext_resource type="Script" path="res://resources/emotion_state.gd" id="4_q3bwu"]
[ext_resource type="PackedScene" uid="uid://c2pdvbdktloaw" path="res://scenes/portal/portal.tscn" id="5_jw8px"]
[ext_resource type="PackedScene" uid="uid://c7b1ix1wtarcb" path="res://scenes/player/player.tscn" id="6_tqsuy"]
[ext_resource type="PackedScene" uid="uid://dhavwi0uq6seh" path="res://scenes/emotion/emotion.tscn" id="7_o88tx"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fiukr"]
albedo_color = Color(0.792157, 0.792157, 0.792157, 1)

[sub_resource type="Resource" id="Resource_l0423"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anxiety"
color = Color(0.839216, 0.74902, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.901961, 0.32549, 1), Color(0.929412, 0.658824, 0, 1), Color(1, 0.937255, 0.101961, 1)])

[sub_resource type="Curve3D" id="Curve3D_aor3d"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 14, 0, 0),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_fknm6"]
transparency = 1
albedo_color = Color(0, 0, 0, 0)

[sub_resource type="GDScript" id="GDScript_pelj8"]
resource_local_to_scene = true
script/source = "extends CSGPolygon3D

@onready var anim_player: AnimationPlayer =  $AnimationPlayer

func play_glow() -> void:
	anim_player.play(\"interact_glow\", -1, 1, false)

func end_glow() -> void: 
	anim_player.play(\"RESET\", -1, 1, false)
"

[sub_resource type="Sky" id="Sky_iafvu"]

[sub_resource type="Environment" id="Environment_pd4vg"]
background_mode = 2
sky = SubResource("Sky_iafvu")
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.97
ssao_radius = 8.1
ssao_intensity = 4.3
glow_enabled = true
glow_intensity = 1.86
glow_strength = 0.87
glow_bloom = 0.02
glow_hdr_threshold = 0.44

[sub_resource type="Resource" id="Resource_sqrve"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anger"
color = Color(1.002, 0, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.247059, 0.188235, 1), Color(0.552941, 0.0235294, 0, 1), Color(1, 0.388235, 0.321569, 1)])

[sub_resource type="Resource" id="Resource_70k64"]
resource_local_to_scene = true
script = ExtResource("4_q3bwu")
emotion_name = "anxiety"
color = Color(0.839216, 0.74902, 0, 1)
color_fluctuate_array = Array[Color]([Color(1, 0.901961, 0.32549, 1), Color(0.929412, 0.658824, 0, 1), Color(1, 0.937255, 0.101961, 1)])

[node name="StageOneLevelSix" type="Node3D" groups=["levels"]]
transform = Transform3D(1, 0, -1.74846e-07, 0, 1, 0, 1.74846e-07, 0, 1, -65, 0, -311.663)
script = ExtResource("1_gkhvj")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -8, 0)
use_collision = true
collision_layer = 3

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D"]
transform = Transform3D(8.63953, 0.000119657, 0.00248373, -0.000140128, 7.37744, -0.0050617, -0.000326336, 0.000567901, 65.7551, 258.515, 3.26362, 534.703)
use_collision = true
size = Vector3(89.2318, 1, 8.76352)
material = SubResource("StandardMaterial3D_fiukr")

[node name="PlayerStartContainer" type="Node3D" parent="."]
transform = Transform3D(-2.18557e-08, 0, -0.5, 0, 0.5, 0, 0.5, 0, -2.18557e-08, 88.3677, 0, 241.133)

[node name="TimeControlClock" parent="." instance=ExtResource("3_524s5")]
transform = Transform3D(120, 0, 0, 0, 120, 0, 0, 0, 120, 320.597, 37.5709, 552.501)
required_emotion = SubResource("Resource_l0423")
directional_light = Object(Node3D,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"editor_description":"","transform":Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0),"rotation_edit_mode":0,"rotation_order":2,"top_level":false,"visible":true,"visibility_parent":NodePath(""),"script":null)


[node name="Sketchfab_Scene" parent="TimeControlClock" index="2"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="CamRoot" parent="TimeControlClock" index="4"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Sprite3D" parent="TimeControlClock" index="5"]
transform = Transform3D(0.12, 0, 0, 0, 0.12, 0, 0, 0, 0.12, 0, 0.275908, 1.16385e-08)

[node name="MovableBlockContainer3" type="Node3D" parent="."]
transform = Transform3D(20, 0, 0, 0, 20, 0, 0, 0, 20, 45.0629, 15.0392, 393.916)

[node name="Path3D" type="Path3D" parent="MovableBlockContainer3"]
curve = SubResource("Curve3D_aor3d")

[node name="PathFollow3D" type="PathFollow3D" parent="MovableBlockContainer3/Path3D"]
transform = Transform3D(-4.3711e-08, 0, -0.999993, 0, 1, 0, 0.99999, 0, -4.37111e-08, 0, 0, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="MovableBlockContainer3/Path3D/PathFollow3D"]
transform = Transform3D(1, 4.65661e-10, 0, 0, 1, 6.98492e-10, 0, 4.59841e-09, 1, 0, 0, 0)
update_rotation = false
update_scale = false

[node name="VisiblePath" parent="MovableBlockContainer3" instance=ExtResource("2_rmmut")]
path_node = NodePath("../Path3D")
material = SubResource("StandardMaterial3D_fknm6")
script = SubResource("GDScript_pelj8")

[node name="Portal" parent="." instance=ExtResource("5_jw8px")]
transform = Transform3D(0.85248, 0, -14.9758, 0, 15, 0, 14.9758, 0, 0.85248, 586.461, 13.9898, 569.254)

[node name="WorldEnvironment_MoonBurst" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pd4vg")

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(-1, 0, -2.38502e-08, 0, 1, 0, 2.38502e-08, 0, -1, 112.238, 4.41536, 269.11)
visible = false
light_energy = 9.566
spot_range = 20.858

[node name="Player" parent="." instance=ExtResource("6_tqsuy")]
transform = Transform3D(1, 0, -1.74846e-07, 0, 1, 0, 1.74846e-07, 0, 1, 324.726, 1, 462.612)

[node name="Anger" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_o88tx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 344.986, 1.87169, 488.226)
emotion_state = SubResource("Resource_sqrve")
player = NodePath("../Player")

[node name="Anxiety" parent="." node_paths=PackedStringArray("player") instance=ExtResource("7_o88tx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 324.749, 0, 485.515)
emotion_state = SubResource("Resource_70k64")
player = NodePath("../Player")

[node name="light_container" type="Node3D" parent="."]

[node name="DirectionalLight3D_temp" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(1, 9.21359e-08, -1.486e-07, 0, 0.849893, 0.526956, 1.74846e-07, -0.526956, 0.849893, 0, 26.5368, 0)
visible = false
light_color = Color(0.52549, 0.619608, 0.733333, 1)
light_energy = 0.32
shadow_enabled = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="light_container"]
transform = Transform3D(1, 0, 0, 0, 0.849892, 0.526956, 0, -0.526956, 0.849893, 0, 26.5, 0)
light_color = Color(0.462745, 0.462745, 0.462745, 1)
light_energy = 5.0
shadow_enabled = true
shadow_blur = 0.5
directional_shadow_mode = 0
sky_mode = 1

[editable path="TimeControlClock"]
